webpackJsonp([22],{"5fyK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a,o=n("3cXf"),s=n.n(o),r=n("rVsN"),c=n.n(r),l=n("eyOy"),d=n("K2f2"),u="http://zj.tianjistar.com/icon/daohang.png",p=null,m=null,f=null;window.initialize=function(){Object(l.a)(a).then(function(e){m=e.Longitude,f=e.Latitude;var t=new BMap.Point(m,f);(i=new BMap.Map("map")).centerAndZoom(t,14),i.enableScrollWheelZoom(!0),i.addEventListener("touchstart",function(){document.getElementById("suggestId").blur()}),new c.a(function(e){var t={lng:m,lat:f};i.setCenter(t),e({lng:t.lng,lat:t.lat})}).then(function(e){if("home"==p)!function(e,t){var n=new BMap.Point(t.lng,t.lat),i=new BMap.Icon(u,new BMap.Size(30,30)),a=new BMap.Marker(n,{icon:i});e.addOverlay(a),(new BMap.Geocoder).getLocation(n,function(e){e=e.addressComponents.district,sessionStorage.district=e}),Object(d.r)().then(function(t){t=t.rows,sessionStorage.setRescue=s()(t),t instanceof Array&&t.forEach(function(t){var n=parseFloat(t.longitude),i=parseFloat(t.dimensions),a=new BMap.Point(n,i);!function(e,t){var n=new BMap.Marker(e);t.addOverlay(n)}(a,e)})})}(i,e),c=i,(l=new BMap.Autocomplete({input:"suggestId",location:c})).addEventListener("onhighlight",function(e){var t=e.fromitem.value;e.fromitem.index>-1&&(t.province,t.city,t.district,t.street,t.business),e.fromitem.index,e.toitem.index>-1&&((t=e.toitem.value).province,t.city,t.district,t.street,t.business),e.toitem.index}),l.addEventListener("onconfirm",function(e){var t=e.item.value;!function(e){c.clearOverlays();var t=new BMap.LocalSearch(c,{onSearchComplete:function(){var e=t.getResults().getPoi(0).point;c.centerAndZoom(e,18),c.addOverlay(new BMap.Marker(e))}});t.search(e)}(t.province+t.city+t.district+t.street+t.business)});else if("rescue"==p){var t=new BMap.Point(e.lng,e.lat),n=sessionStorage.lngLat.split(",")[1],a=sessionStorage.lngLat.split(",")[0],o=new BMap.Point(n,a),r=new BMap.DrivingRoute(i,{renderOptions:{map:i,autoViewport:!0}});r.search(t,o)}var c,l}).catch(function(e){console.log(e)}),i.setMapStyle({styleJson:[{featureType:"railway",elementType:"all",stylers:{color:"#ffffff08"}}]})})};var v=function(e){e=e.split(","),i.panTo(new BMap.Point(e[0],e[1]))};var h=function(e,t){a=t,p=e;for(var n="https://api.map.baidu.com/api?v=2.0&ak=FdnveqDZGzZHbnx08vngQUBH4BNkzi3C&callback=initialize",i=document.getElementsByTagName("script"),o=0;o<i.length;o++){if(i[o].getAttribute("src")==n)return initialize(),!1}var s=document.createElement("script");s.src=n,document.body.appendChild(s);var r=document.createElement("script");r.src="https://developer.baidu.com/map/jsdemo/demo/convertor.js",document.body.appendChild(r)};var g={data:function(){return{height:"270px",enter:-1!==window.location.href.indexOf("home")?"home":"rescue"}},props:["screen","lngLat"],watch:{lngLat:function(e){v(e)},screen:function(e){this.height=!0===e?document.documentElement.offsetHeight+"px":"270px",this.$emit("input",e)}},methods:{sosEv:function(){this.$emit("sos")},downScreen:function(){this.$emit("screen",!1)}},mounted:function(){"rescue"===this.enter&&(this.height=document.documentElement.offsetHeight+"px"),h(this.enter,this)}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mapp",class:{screen:!0===e.screen},style:{height:e.height}},[n("div",{attrs:{id:"map"}}),e._v(" "),"home"==e.enter?n("div",{staticClass:"buttonStyle"},[n("div",{staticClass:"style"}),e._v(" "),e.screen?n("div",{staticClass:"btn"},[n("div",{staticClass:"menuTiao",on:{click:e.downScreen}},[n("p")]),e._v(" "),n("input",{staticClass:"sos",attrs:{type:"button",value:"一键呼救"},on:{click:e.sosEv}})]):e._e()]):e._e()])},staticRenderFns:[]};var y=n("C7Lr")(g,w,!1,function(e){n("KK+O")},"data-v-9dfa2dd2",null);t.default=y.exports},"KK+O":function(e,t){}});