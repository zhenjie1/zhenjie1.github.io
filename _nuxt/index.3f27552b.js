import{a as b,r as f,o as h,b as k,e as a,w as M,v as w,u as m,i as y,f as x,t as B}from"./entry.857d10f3.js";const p=[];function D(s){p.push(s)}let e;function _(){e=new WebSocket("wss://service-09b9300w-1304747704.gz.apigw.tencentcs.com/release/"),e.onmessage=s=>{const n=JSON.parse(s.data);p.forEach(t=>t(n))},setTimeout(()=>{u("login",{token:"123"})},1e3),N()}function u(s,n={}){if(s)if(e){const t=JSON.stringify({action:s,data:n});e.readyState===1&&e.send(t),[0,1].includes(e.readyState)||g()}else g()}function g(){e&&e.close(),_()}let l;function N(){l&&clearInterval(l),l=setInterval(()=>{e.readyState===1&&u("ping")},1e3*3)}const T={class:""},E=["onSubmit"],H=a("button",{type:"submit"}," Send ",-1),I={id:"receiveMessage"},O=b({__name:"index",setup(s){_();const n=f("");D(i=>{var d;const{action:o,data:c}=i,r={chatMsg(){const{msg:S}=c;n.value+=S}};(d=r[o])==null||d.call(r),console.log(i)});const t=f("Hello World");function v(){u("chatMsg",{msg:t.value})}return(i,o)=>(h(),k("div",T,[a("form",{onSubmit:x(v,["prevent"])},[M(a("input",{id:"msg","onUpdate:modelValue":o[0]||(o[0]=c=>y(t)?t.value=c:null),type:"text",name:"msg"},null,512),[[w,m(t)]]),H],40,E),a("pre",I,"      "+B(m(n))+`
    `,1)]))}});export{O as default};
