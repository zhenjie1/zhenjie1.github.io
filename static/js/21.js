webpackJsonp([21],{"5fyK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n("mvHQ"),a=n.n(o),s=n("//Fk"),c=n.n(s),r=n("K2f2"),l=(n("yclV"),"http://zj.tianjistar.com/icon/daohang.png"),u=null;window.initialize=function(){var e=new BMap.Point(113.750644,34.849902);function t(e){0===e.status&&new c.a(function(t,n){i.setCenter(e.points[0]),t({lng:e.points[0].lng,lat:e.points[0].lat})}).then(function(e){if("home"==u)!function(e,t){var n=new BMap.Point(t.lng,t.lat),i=new BMap.Icon(l,new BMap.Size(30,30)),o=new BMap.Marker(n,{icon:i});e.addOverlay(o),(new BMap.Geocoder).getLocation(n,function(e){e=e.addressComponents.district,sessionStorage.district=e}),Object(r.n)().then(function(t){t=t.rows,sessionStorage.setRescue=a()(t);t instanceof Array&&t.forEach(function(t){var n=parseFloat(t.longitude),i=parseFloat(t.dimensions),o=new BMap.Point(n,i);!function(e,t){var n=new BMap.Marker(e);t.addOverlay(n)}(o,e)})})}(i,e);else if("rescue"==u){var t=new BMap.Point(e.lng,e.lat),n=sessionStorage.lngLat.split(",")[1],o=sessionStorage.lngLat.split(",")[0],s=new BMap.Point(n,o);new BMap.DrivingRoute(i,{renderOptions:{map:i,autoViewport:!0}}).search(t,s)}}).catch(function(e){console.log(e)})}(i=new BMap.Map("map")).centerAndZoom(e,14),i.enableScrollWheelZoom(!0),"rescue"!=u&&i.addEventListener("touchstart",function(){document.getElementById("suggestId").blur()}),setTimeout(function(){var n=new BMap.Convertor,i=[];i.push(e),n.translate(i,1,5,t)},0),i.setMapStyle({styleJson:[{featureType:"railway",elementType:"all",stylers:{color:"#ffffff08"}}]})};var p={data:function(){return{height:"270px",enter:-1!==window.location.href.indexOf("home")?"home":"rescue"}},props:["screen","lngLat"],watch:{lngLat:function(e){!function(e){e=e.split(","),i.panTo(new BMap.Point(e[0],e[1]))}(e)},screen:function(e){this.height=!0===e?document.documentElement.offsetHeight+"px":"270px",this.$emit("input",e)}},methods:{sosEv:function(){this.$emit("sos")},downScreen:function(){this.screen=!1,this.$emit("screen",!1)}},mounted:function(){"rescue"===this.enter&&(this.height=document.documentElement.offsetHeight+"px"),function(e){u=e;for(var t="http://api.map.baidu.com/api?v=2.0&ak=FdnveqDZGzZHbnx08vngQUBH4BNkzi3C&callback=initialize",n=document.getElementsByTagName("script"),i=0;i<n.length;i++)if(n[i].getAttribute("src")==t)return initialize(),!1;var o=document.createElement("script");o.src=t,document.body.appendChild(o);var a=document.createElement("script");a.src="http://developer.baidu.com/map/jsdemo/demo/convertor.js",document.body.appendChild(a)}(this.enter)}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mapp",class:{screen:!0===e.screen},style:{height:e.height}},[n("div",{attrs:{id:"map"}}),e._v(" "),"home"==e.enter?n("div",{staticClass:"buttonStyle"},[n("div",{staticClass:"style"}),e._v(" "),e.screen?n("div",{staticClass:"btn"},[n("div",{staticClass:"menuTiao",on:{click:e.downScreen}},[n("p")]),e._v(" "),n("input",{staticClass:"sos",attrs:{type:"button",value:"一键呼救"},on:{click:e.sosEv}})]):e._e()]):e._e()])},staticRenderFns:[]};var f=n("VU/8")(p,d,!1,function(e){n("NUG5")},"data-v-2c080540",null);t.default=f.exports},NUG5:function(e,t){}});