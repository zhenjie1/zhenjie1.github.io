webpackJsonp([17],{"5fyK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=n("3cXf"),r=n.n(a),s=n("rVsN"),c=n.n(s),l=n("eyOy"),u=n("K2f2"),d="http://zj.tianjistar.com/icon/daohang.png",p=null,f=null,v=null;window.initialize=function(){l.a.call(o).then(function(e){f=e.Longitude,v=e.Latitude;var t,n=new BMap.Point(f,v);(i=new BMap.Map("map")).centerAndZoom(n,14),i.enableScrollWheelZoom(!0),i.addEventListener("touchstart",function(){document.getElementById("suggestId").blur()}),t=o,new c.a(function(e){var t={lng:f,lat:v};i.setCenter(t),e({lng:t.lng,lat:t.lat})}).then(function(e){if("home"==p)!function(e,t,n){var i=new BMap.Point(n.lng,n.lat),o=new BMap.Icon(d,new BMap.Size(30,30)),a=new BMap.Marker(i,{icon:o});t.addOverlay(a),(new BMap.Geocoder).getLocation(i,function(t){t=t.addressComponents.district,e.$store.dispatch("setDistrict",t)}),Object(u.r)().then(function(e){e=e.rows,sessionStorage.setRescue=r()(e),e instanceof Array&&e.forEach(function(e){var n=parseFloat(e.longitude),i=parseFloat(e.dimensions),o=new BMap.Point(n,i);!function(e,t){var n=new BMap.Marker(e);t.addOverlay(n)}(o,t)})})}(t,i,e),l=i,(f=new BMap.Autocomplete({input:"suggestId",location:l})).addEventListener("onhighlight",function(e){var t=e.fromitem.value;e.fromitem.index>-1&&(t.province,t.city,t.district,t.street,t.business),e.fromitem.index,e.toitem.index>-1&&((t=e.toitem.value).province,t.city,t.district,t.street,t.business),e.toitem.index}),f.addEventListener("onconfirm",function(e){var t=e.item.value;!function(e){l.clearOverlays();var t=new BMap.LocalSearch(l,{onSearchComplete:function(){var e=t.getResults().getPoi(0).point;l.centerAndZoom(e,18),l.addOverlay(new BMap.Marker(e))}});t.search(e)}(t.province+t.city+t.district+t.street+t.business)});else if("rescue"==p){var n=new BMap.Point(e.lng,e.lat),o=sessionStorage.lngLat.split(",")[1],a=sessionStorage.lngLat.split(",")[0],s=new BMap.Point(o,a),c=new BMap.DrivingRoute(i,{renderOptions:{map:i,autoViewport:!0}});c.search(n,s)}var l,f}).catch(function(e){console.log(e)}),i.setMapStyle({styleJson:[{featureType:"railway",elementType:"all",stylers:{color:"#ffffff08"}}]})})};var m=function(e){e=e.split(","),i.panTo(new BMap.Point(e[0],e[1]))};var h=function(e,t){o=t,p=e;for(var n="https://api.map.baidu.com/api?v=2.0&ak=FdnveqDZGzZHbnx08vngQUBH4BNkzi3C&callback=initialize",i=document.getElementsByTagName("script"),a=0;a<i.length;a++){if(i[a].getAttribute("src")==n)return initialize(),!1}var r=document.createElement("script");r.src=n,document.body.appendChild(r);var s=document.createElement("script");s.src="https://developer.baidu.com/map/jsdemo/demo/convertor.js",document.body.appendChild(s)};var g={data:function(){return{height:"270px",enter:-1!==window.location.href.indexOf("home")?"home":"rescue"}},props:["screen","lngLat"],watch:{lngLat:function(e){m(e)},screen:function(e){this.height=!0===e?document.documentElement.offsetHeight+"px":"270px",this.$emit("input",e)}},methods:{sosEv:function(){this.$emit("sos")},downScreen:function(){this.$emit("screen",!1)}},mounted:function(){"rescue"===this.enter&&(this.height=document.documentElement.offsetHeight+"px"),h(this.enter,this)}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mapp",class:{screen:!0===e.screen},style:{height:e.height}},[n("div",{attrs:{id:"map"}}),e._v(" "),"home"==e.enter?n("div",{staticClass:"buttonStyle"},[n("div",{staticClass:"style"}),e._v(" "),e.screen?n("div",{staticClass:"btn"},[n("div",{staticClass:"menuTiao",on:{click:e.downScreen}},[n("p")]),e._v(" "),n("input",{staticClass:"sos",attrs:{type:"button",value:"一键呼救"},on:{click:e.sosEv}})]):e._e()]):e._e()])},staticRenderFns:[]};var w=n("C7Lr")(g,y,!1,function(e){n("KK+O")},"data-v-9dfa2dd2",null);t.default=w.exports},"KK+O":function(e,t){},eyOy:function(e,t,n){"use strict";var i=n("rVsN"),o=n.n(i),a=n("IvJb"),r=n("yclV");t.a=function(){if(Object(r.d)())return o.a.resolve({});if(!Object(r.c)())return o.a.resolve({});var e=r.b.call(this);return e?o.a.resolve(e):new o.a(function(e,t){function n(t){var n=t.coords.longitude,i=t.coords.latitude;console.log("经度为:"+n+"纬度为:"+i),e({x:n,y:i})}function i(e){2==e.code&&a.default.$vux.toast.text("请打开您浏览器的位置权限"),a.default.$vux.toast.text({1:"用户拒绝定位服务",2:"获取不到定位信息",3:"获取定位信息超时"}[e.code]),t(!1)}navigator.geolocation?navigator.geolocation.getCurrentPosition(n,i,{enableHighAccuracy:!0,timeout:6e4,maximumAge:6e4}):alert("你的浏览器不支持定位，无法获取到您的位置！")}).catch(function(e){return e})}}});